<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gerador de Certificado</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body { margin:0; font-family: Arial, sans-serif; background: #f9fafb; display:flex; height:100vh; }
  #sidebar { width: 300px; background: #2563eb; color: #fff; padding: 20px; box-sizing:border-box; }
  #sidebar h2 { margin-top:0; }
  #sidebar label { display:block; margin-top:15px; }
  #sidebar input { width:100%; padding:8px; margin-top:5px; border-radius:6px; border:none; }
  #sidebar input[type="file"] { padding:3px; }
  #sidebar button { margin-top:20px; padding:10px; width:100%; border:none; border-radius:8px; background:#16a34a; color:#fff; font-size:16px; cursor:pointer; }
  #sidebar button:hover { opacity:0.9; }
  #main { flex:1; display:flex; justify-content:center; align-items:center; }
</style>
</head>
<body>

<div id="sidebar">
  <h2>Preencha os Dados</h2>
  <label>Nome Completo:
    <input type="text" id="nome" placeholder="Digite o nome completo">
  </label>
  <label>Filial:
    <input type="text" id="filial" placeholder="Digite a filial">
  </label>
  <label>Data:
    <input type="date" id="data">
  </label>
  <label>Foto Farmina:
    <input type="file" id="fotoFarmina" accept="image/*">
  </label>
  <label>Foto Loja:
    <input type="file" id="fotoLoja" accept="image/*">
  </label>
  <button id="gerarCertificado">üéì Gerar Certificado</button>
</div>

<div id="main">
  <h1>Visualiza√ß√£o do Certificado</h1>
</div>

<script>
document.getElementById('gerarCertificado').addEventListener('click', async () => {
  const nome = document.getElementById('nome').value.trim();
  const filial = document.getElementById('filial').value.trim();
  const data = document.getElementById('data').value;

  if(!nome || !filial || !data) {
    alert("Preencha todos os campos!");
    return;
  }

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({ orientation: 'landscape', unit: 'px', format: [842, 595] });

  async function fileToDataURL(fileInput) {
    return new Promise((resolve) => {
      const file = fileInput.files[0];
      if(!file) return resolve(null);
      const reader = new FileReader();
      reader.onload = e => resolve(e.target.result);
      reader.readAsDataURL(file);
    });
  }

  const fotoFarmina = await fileToDataURL(document.getElementById('fotoFarmina'));
  const fotoLoja = await fileToDataURL(document.getElementById('fotoLoja'));

  pdf.setFillColor(255, 255, 255);
  pdf.rect(0,0,842,595,'F');

  // Ajuste do tamanho das fotos
  const imgWidth = 150;
  const imgHeight = 100;

  if(fotoFarmina) pdf.addImage(fotoFarmina, 'PNG', 70, 60, imgWidth, imgHeight);
  if(fotoLoja) pdf.addImage(fotoLoja, 'PNG', 622, 60, imgWidth, imgHeight);

  pdf.setLineWidth(4);
  pdf.setDrawColor(37, 99, 235);
  pdf.rect(20,20,802,555);

  pdf.setFontSize(36);
  pdf.setTextColor(37, 99, 235);
  pdf.setFont('helvetica', 'bold');
  pdf.text('Certificado de Participa√ß√£o', 421, 180, { align:'center' });

  pdf.setFontSize(28);
  pdf.setTextColor(0,0,0);
  pdf.text(nome, 421, 260, { align:'center' });

  pdf.setFontSize(20);
  pdf.text(`Filial: ${filial}`, 421, 320, { align:'center' });
  pdf.text(`Data: ${data}`, 421, 360, { align:'center' });

  pdf.setFontSize(20);
  pdf.text('Parab√©ns pela participa√ß√£o do treinamento da linha N&D', 421, 410, { align:'center' });
  pdf.text('e pela participa√ß√£o no Quiz Farmina!', 421, 450, { align:'center' });

  pdf.setLineWidth(1);
  const assinaturaY = 520;
  const assinaturaTexto = "Farmina Pet Foods Brasil";
  const assinaturaXStart = 421 - 120;
  const assinaturaXEnd = 421 + 120;
  pdf.line(assinaturaXStart, assinaturaY, assinaturaXEnd, assinaturaY);
  pdf.setFontSize(16);
  pdf.text(assinaturaTexto, 421, assinaturaY + 25, { align:'center' });

  pdf.save(`Certificado_${nome.replace(/ /g,'_')}.pdf`);
});
</script>

</body>
</html>
